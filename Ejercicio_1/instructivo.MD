# ğŸ“Œ Infraestructura para la API REST en AWS

Este documento detalla la arquitectura implementada para desplegar una API REST en AWS utilizando **CloudFormation**, cumpliendo con los requerimientos establecidos en el **Ejercicio 1**.

---

## **1ï¸âƒ£ Infraestructura en AWS**

### **ğŸ”¹ ConfiguraciÃ³n de Red (VPC y Subnet)**
Se establece una **VPC privada** con una **subred pÃºblica** para garantizar la conectividad de los servidores.

### **ğŸ”¹ Seguridad y Control de Acceso**
Se configuran **grupos de seguridad** con las siguientes reglas:
- **SSH (22)** â†’ Restringido solo para tareas de administraciÃ³n.
- **HTTP (80)** â†’ Acceso pÃºblico para la API.
- **EFS (2049)** â†’ Permite la comunicaciÃ³n entre los servidores y el almacenamiento compartido.

### **ğŸ”¹ Almacenamiento Persistente con EFS**
Se implementa **Amazon Elastic File System (EFS)** para almacenamiento compartido entre los servidores.
- Almacena los archivos JSON procesados por la API.
- Se monta en `/mnt/efs` en cada servidor EC2, asegurando disponibilidad y persistencia de datos.

---

## **2ï¸âƒ£ Balanceo de Carga con HAProxy**

Para distribuir el trÃ¡fico de manera equitativa entre los servidores de aplicaciÃ³n, se configura un **balanceador de carga basado en HAProxy**.
- Implementa el algoritmo **round-robin** para optimizar el uso de recursos.
- Se habilitan **chequeos de salud** para detectar y excluir servidores inactivos.

ğŸ” **Nota:** No se utiliza **AWS ELB**, cumpliendo con la restricciÃ³n especificada en el ejercicio.

---

## **3ï¸âƒ£ ImplementaciÃ³n de los Servidores de AplicaciÃ³n**

Se despliegan **dos instancias EC2** que ejecutan la API REST.
- Se instalan dependencias como **Python y Flask**.
- Se clona el cÃ³digo desde **GitHub** y se ejecuta automÃ¡ticamente al iniciar la instancia.
- Se configura el almacenamiento en **EFS** para compartir informaciÃ³n entre servidores.

ğŸ“Œ **Cada instancia es accesible a travÃ©s de `http://<IP>:5000`, con el trÃ¡fico gestionado por HAProxy.**

---

## **4ï¸âƒ£ API REST - Funcionalidades y Endpoints**

âœ… `POST /json` â†’ Sube un archivo JSON utilizando un identificador Ãºnico.
âœ… `GET /json/<id>` â†’ Recupera un JSON almacenado.
âœ… `PUT /json/<id>` â†’ Modifica un archivo JSON existente.
âœ… `DELETE /json/<id>` â†’ Elimina un archivo JSON.

ğŸ“Œ **Todos los archivos se almacenan en `/mnt/efs` para garantizar disponibilidad y persistencia.**

---

## **5ï¸âƒ£ AutomatizaciÃ³n del Despliegue**

Para facilitar la implementaciÃ³n de la infraestructura, se proporciona un script `deploy.sh` que ejecuta los despliegues en el siguiente orden:
```bash
bash deploy.sh
```
El script realiza las siguientes acciones:
1ï¸âƒ£ **Configura la VPC y Subnet**
2ï¸âƒ£ **Establece los Grupos de Seguridad**
3ï¸âƒ£ **Despliega el sistema de almacenamiento en EFS**
4ï¸âƒ£ **Configura HAProxy como balanceador de carga**
5ï¸âƒ£ **Lanza las instancias EC2 con la API**

ğŸš€ **Tras la ejecuciÃ³n del script, la API REST queda lista para su uso.**


